# ν•„ν„° κΈ°λ¥ κµ¬ν„ κ³„ν (Phase 2.3)

## π“‹ κ°μ”

κ΄€κ΄‘μ§€ λ©λ΅ νμ΄μ§€μ— μ§€μ—­ ν•„ν„°μ™€ κ΄€κ΄‘ νƒ€μ… ν•„ν„°λ¥Ό μ¶”κ°€ν•μ—¬ μ‚¬μ©μκ°€ μ›ν•λ” μ΅°κ±΄μ κ΄€κ΄‘μ§€λ¥Ό μ‰½κ² μ°Ύμ„ μ μλ„λ΅ ν•©λ‹λ‹¤.

## π― λ©ν‘

1. **μ§€μ—­ ν•„ν„°**: μ‹/λ„ λ‹¨μ„ μ„ νƒ (μ„μΈ, λ¶€μ‚°, κ²½κΈ° λ“±) + "μ „μ²΄" μµμ…
2. **κ΄€κ΄‘ νƒ€μ… ν•„ν„°**: 8κ°€μ§€ νƒ€μ… (κ΄€κ΄‘μ§€, λ¬Έν™”μ‹μ„¤, μ¶•μ /ν–‰μ‚¬ λ“±) + "μ „μ²΄" μµμ…
3. **ν•„ν„° μ΅°ν•©**: μ§€μ—­ + νƒ€μ… λ™μ‹ μ μ© κ°€λ¥
4. **μƒνƒ λ™κΈ°ν™”**: URL νλΌλ―Έν„°μ™€ ν•„ν„° μƒνƒ λ™κΈ°ν™” (κ³µμ  κ°€λ¥ν• λ§ν¬)

## π—οΈ μ•„ν‚¤ν…μ² μ„¤κ³„

### ν™•μ¥μ„± κ³ λ ¤μ‚¬ν•­

1. **URL κΈ°λ° μƒνƒ κ΄€λ¦¬**: ν–¥ν›„ κ²€μƒ‰ κΈ°λ¥κ³Ό ν†µν•© μ‹ URL νλΌλ―Έν„°λ΅ ν†µν•© κ΄€λ¦¬ κ°€λ¥
2. **λ¨λ“ν™”λ μ»΄ν¬λ„νΈ κµ¬μ΅°**: ν•„ν„° UI, μƒνƒ κ΄€λ¦¬, API νΈμ¶ λ¶„λ¦¬
3. **μ¬μ‚¬μ© κ°€λ¥ν• ν•„ν„° μ»΄ν¬λ„νΈ**: λ‹¤λ¥Έ νμ΄μ§€μ—μ„λ„ μ‚¬μ© κ°€λ¥ν•λ„λ΅ μ„¤κ³„

### μ•μ •μ„± κ³ λ ¤μ‚¬ν•­

1. **μ—λ¬ μ²λ¦¬**: API μ‹¤ν¨ μ‹ κΈ°λ³Έκ°’μΌλ΅ ν΄λ°±, μ‚¬μ©μμ—κ² λ…ν™•ν• μ—λ¬ λ©”μ‹μ§€
2. **λ΅λ”© μƒνƒ**: ν•„ν„° λ³€κ²½ μ‹ λ΅λ”© μΈλ””μΌ€μ΄ν„° ν‘μ‹
3. **λΉ μƒνƒ μ²λ¦¬**: ν•„ν„° κ²°κ³Όκ°€ μ—†μ„ λ• μ•λ‚΄ λ©”μ‹μ§€

### λ¨λ“ν™” μ „λµ

```
components/
β”β”€β”€ tour-filters.tsx          # ν•„ν„° UI μ»΄ν¬λ„νΈ (Client Component)
β”‚   β”β”€β”€ AreaFilter            # μ§€μ—­ ν•„ν„° λ“λ΅­λ‹¤μ΄
β”‚   β””β”€β”€ ContentTypeFilter     # κ΄€κ΄‘ νƒ€μ… ν•„ν„° λ“λ΅­λ‹¤μ΄
β”β”€β”€ tour-list.tsx             # κΈ°μ΅΄ μ»΄ν¬λ„νΈ (μ¬μ‚¬μ©)
β””β”€β”€ tour-card.tsx             # κΈ°μ΅΄ μ»΄ν¬λ„νΈ (μ¬μ‚¬μ©)

lib/
β”β”€β”€ api/
β”‚   β””β”€β”€ tour-api-client.ts    # μ§€μ—­μ½”λ“ μ΅°ν ν•¨μ (μƒλ΅ μ¶”κ°€)
β””β”€β”€ types/
    β””β”€β”€ tour.ts               # κΈ°μ΅΄ νƒ€μ… μ‚¬μ©

app/
β””β”€β”€ page.tsx                  # Server Component (URL νλΌλ―Έν„° κΈ°λ°)
```

## π“ κµ¬ν„ λ‹¨κ³„

### Phase 1: μ§€μ—­μ½”λ“ API ν΄λΌμ΄μ–ΈνΈ ν•¨μ μ¶”κ°€

**νμΌ**: `lib/api/tour-api-client.ts` (μƒλ΅ μƒμ„±)

**κΈ°λ¥**:
- μ§€μ—­μ½”λ“ λ©λ΅ μ΅°ν ν•¨μ (`fetchAreaCodes`)
- API μ—λ¬ μ²λ¦¬ λ° νƒ€μ… μ•μ •μ„± λ³΄μ¥
- λ΅κ·Έ μ¶”κ°€ (λ””λ²„κΉ…μ©)

**μ£Όμμ‚¬ν•­**:
- μ§€μ—­μ½”λ“λ” κ±°μ λ³€ν•μ§€ μ•μΌλ―€λ΅ κΈ΄ μΊμ‹± μ‹κ°„ μ μ© (24μ‹κ°„)
- API μ‹¤ν¨ μ‹ λΉ λ°°μ—΄ λ°ν™ λ° μ—λ¬ λ΅κΉ…

### Phase 2: ν•„ν„° UI μ»΄ν¬λ„νΈ κµ¬ν„

**νμΌ**: `components/tour-filters.tsx` (μƒλ΅ μƒμ„±)

**κΈ°λ¥**:
1. **μ§€μ—­ ν•„ν„° λ“λ΅­λ‹¤μ΄**
   - shadcn/ui Select μ»΄ν¬λ„νΈ μ‚¬μ©
   - "μ „μ²΄" μµμ… (value: "all")
   - μ§€μ—­μ½”λ“ λ©λ΅μ€ propsλ΅ λ°›μ
   - ν„μ¬ μ„ νƒλ κ°’ ν‘μ‹

2. **κ΄€κ΄‘ νƒ€μ… ν•„ν„° λ“λ΅­λ‹¤μ΄**
   - shadcn/ui Select μ»΄ν¬λ„νΈ μ‚¬μ©
   - "μ „μ²΄" μµμ… (value: "all")
   - CONTENT_TYPE μƒμ μ‚¬μ©
   - ν„μ¬ μ„ νƒλ κ°’ ν‘μ‹

3. **ν•„ν„° μ΄κΈ°ν™” λ²„νΌ** (μ„ νƒ μ‚¬ν•­)
   - λ¨λ“  ν•„ν„°λ¥Ό "μ „μ²΄"λ΅ μ΄κΈ°ν™”

**UI μ”κµ¬μ‚¬ν•­**:
- λ°μ‘ν• λ””μμΈ (λ¨λ°”μΌ: μ„Έλ΅ λ°°μΉ, λ°μ¤ν¬ν†±: κ°€λ΅ λ°°μΉ)
- Spacing-First μ •μ±… μ¤€μ (gap μ‚¬μ©)
- λ‹¤ν¬ λ¨λ“ μ§€μ›
- μ ‘κ·Όμ„± (ARIA λΌλ²¨)

**Props μΈν„°νμ΄μ¤**:
```typescript
interface TourFiltersProps {
  areaCodes: AreaCode[];
  selectedAreaCode: string; // "all" λλ” μ§€μ—­μ½”λ“
  selectedContentType: string; // "all" λλ” contentTypeId
  onAreaCodeChange: (value: string) => void;
  onContentTypeChange: (value: string) => void;
  isLoading?: boolean;
}
```

### Phase 3: μƒνƒ κ΄€λ¦¬ λ° URL νλΌλ―Έν„° μ—°λ™

**νμΌ**: `app/page.tsx` (μμ •)

**λ³€κ²½ μ‚¬ν•­**:
1. **URL νλΌλ―Έν„° μ½κΈ°**
   - `searchParams`μ—μ„ `areaCode`, `contentTypeId` μ½κΈ°
   - κΈ°λ³Έκ°’: `areaCode="1"` (μ„μΈ), `contentTypeId="12"` (κ΄€κ΄‘μ§€)
   - "all" κ°’ μ²λ¦¬: κΈ°λ³Έκ°’μΌλ΅ λ³€ν™

2. **μ§€μ—­μ½”λ“ λ©λ΅ μ΅°ν**
   - `fetchAreaCodes()` ν•¨μ νΈμ¶
   - μ—λ¬ μ‹ λΉ λ°°μ—΄ λ°ν™ (ν•„ν„°λ” λΉ„ν™μ„±ν™”λμ§€ μ•μ)

3. **ν•„ν„° μ»΄ν¬λ„νΈ ν†µν•©**
   - Client Componentλ΅ ν•„ν„° λ¶€λ¶„ λ¶„λ¦¬ (ν•„μ” μ‹)
   - λλ” μ „μ²΄ νμ΄μ§€λ¥Ό Client Componentλ΅ μ „ν™
   - **κ¶μ¥**: ν•„ν„° λ¶€λ¶„λ§ Client Componentλ΅ λ¶„λ¦¬

**μ•„ν‚¤ν…μ² μ„ νƒ**:

**μµμ… A**: ν•„ν„°λ§ Client Componentλ΅ λ¶„λ¦¬
- `components/tour-filters.tsx`: Client Component
- `app/page.tsx`: Server Component μ μ§€
- ν•„ν„° λ³€κ²½ μ‹ `router.push()`λ΅ URL μ—…λ°μ΄νΈ
- URL λ³€κ²½ β†’ νμ΄μ§€ μ¬λ λ”λ§ β†’ μƒλ΅μ΄ λ°μ΄ν„° λ΅λ“

**μµμ… B**: μ „μ²΄ νμ΄μ§€λ¥Ό Client Componentλ΅ μ „ν™
- `app/page.tsx`: Client Component
- `useSearchParams()`, `useRouter()` μ‚¬μ©
- ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ μƒνƒ κ΄€λ¦¬

**μ„ νƒ**: μµμ… A (Server Component μ μ§€, SEO λ° μ„±λ¥ μ°μ„ )

### Phase 4: ν•„ν„°λ§λ κ²°κ³Ό ν‘μ‹

**λ³€κ²½ μ‚¬ν•­**:
- `fetchTourList()` ν•¨μμ— URL νλΌλ―Έν„° μ „λ‹¬
- ν•„ν„° λ³€κ²½ μ‹ μλ™μΌλ΅ μƒλ΅μ΄ λ°μ΄ν„° λ΅λ“
- λ΅λ”© μƒνƒ ν‘μ‹ (ν•„ν„° λ³€κ²½ μ¤‘)
- λΉ κ²°κ³Ό μ²λ¦¬ (ν•„ν„° μ΅°κ±΄μ— λ§λ” κ΄€κ΄‘μ§€κ°€ μ—†μ„ λ•)

### Phase 5: UX κ°μ„ 

1. **λ΅λ”© μƒνƒ**
   - ν•„ν„° λ³€κ²½ μ‹ μ¤μΌλ ν†¤ UI λλ” λ΅λ”© μ¤ν”Όλ„
   - κΈ°μ΅΄ λ©λ΅μ€ μ μ§€ν•κ±°λ‚ λ€μ²΄

2. **ν•„ν„° μƒνƒ ν‘μ‹**
   - ν„μ¬ μ„ νƒλ ν•„ν„° ν‘μ‹ (μ: "μ„μΈ Β· κ΄€κ΄‘μ§€")
   - ν•„ν„° μ΄κΈ°ν™” λ²„νΌ (μ„ νƒ μ‚¬ν•­)

3. **κ²°κ³Ό κ°μ ν‘μ‹**
   - "μ΄ Nκ° κ΄€κ΄‘μ§€" ν‘μ‹

4. **μ—λ¬ μ²λ¦¬**
   - API μ‹¤ν¨ μ‹ μ—λ¬ λ©”μ‹μ§€ ν‘μ‹
   - μ¬μ‹λ„ λ²„νΌ (μ„ νƒ μ‚¬ν•­)

## π¨ μ μ¬ μ¤λ¥ λ¶„μ„

### 1. μ§€μ—­μ½”λ“ API μ‹¤ν¨ μ‹ ν•„ν„° λΉ„ν™μ„±ν™”

**ν™•λ¥ **: λ‚®μ (5-10%)
**μ›μΈ**:
- λ„¤νΈμ›ν¬ μ¤λ¥
- API μ„λ²„ λ¬Έμ 
- API ν‚¤ λ§λ£/μ¤λ¥

**μν–¥**:
- μ§€μ—­ ν•„ν„° λ“λ΅­λ‹¤μ΄μ΄ λΉ„μ–΄μμ
- μ‚¬μ©μκ°€ μ§€μ—­μ„ μ„ νƒν•  μ μ—†μ

**λ€μ‘ λ°©μ•**:
1. **κΈ°λ³Έ μ§€μ—­ λ©λ΅ μ κ³µ**: API μ‹¤ν¨ μ‹ ν•λ“μ½”λ”©λ μ£Όμ” μ§€μ—­ λ©λ΅ ν‘μ‹
2. **μ—λ¬ λ©”μ‹μ§€ ν‘μ‹**: "μ§€μ—­ λ©λ΅μ„ λ¶λ¬μ¬ μ μ—†μµλ‹λ‹¤. κΈ°λ³Έ μ§€μ—­λ§ μ„ νƒ κ°€λ¥ν•©λ‹λ‹¤."
3. **μ¬μ‹λ„ λ΅μ§**: API μ‹¤ν¨ μ‹ μλ™ μ¬μ‹λ„ (μµλ€ 3ν)
4. **μΊμ‹± ν™μ©**: μ„±κ³µν• μ‘λ‹µμ„ localStorageμ— μ €μ¥ν•μ—¬ μ¤ν”„λΌμΈ μ‹ μ‚¬μ©

**κµ¬ν„ μ°μ„ μμ„**: λ†’μ

### 2. ν•„ν„° λ³€κ²½ μ‹ API νΈμ¶ μ‹¤ν¨

**ν™•λ¥ **: μ¤‘κ°„ (10-20%)
**μ›μΈ**:
- API Rate Limit μ΄κ³Ό
- λ„¤νΈμ›ν¬ νƒ€μ„μ•„μ›ƒ
- μλ»λ νλΌλ―Έν„° μ΅°ν•© (μ: μ΅΄μ¬ν•μ§€ μ•λ” μ§€μ—­μ½”λ“)

**μν–¥**:
- λ©λ΅μ΄ μ—…λ°μ΄νΈλμ§€ μ•μ
- μ‚¬μ©μκ°€ ν•„ν„° λ³€κ²½μ„ μΈμ§€ν•μ§€ λ»ν•¨

**λ€μ‘ λ°©μ•**:
1. **μ—λ¬ μƒνƒ ν‘μ‹**: λ…ν™•ν• μ—λ¬ λ©”μ‹μ§€ λ° μ¬μ‹λ„ λ²„νΌ
2. **μ΄μ „ μƒνƒ μ μ§€**: API μ‹¤ν¨ μ‹ μ΄μ „ λ©λ΅ μ μ§€
3. **νλΌλ―Έν„° κ²€μ¦**: ν•„ν„° λ³€κ²½ μ „ μ ν¨μ„± κ²€μ‚¬
4. **Debounce μ μ©**: λΉ λ¥Έ μ—°μ† ν•„ν„° λ³€κ²½ μ‹ λ§μ§€λ§‰ μ”μ²­λ§ μ‹¤ν–‰

**κµ¬ν„ μ°μ„ μμ„**: λ†’μ

### 3. URL νλΌλ―Έν„°μ™€ ν•„ν„° μƒνƒ λ¶μΌμΉ

**ν™•λ¥ **: λ‚®μ (2-5%)
**μ›μΈ**:
- λΈλΌμ°μ € λ’¤λ΅κ°€κΈ°/μ•μΌλ΅κ°€κΈ° μ‹ μƒνƒ μ—…λ°μ΄νΈ λ„λ½
- μ§μ ‘ URL μ…λ ¥ μ‹ ν•„ν„° UI λ―Έλ°μ
- μ—¬λ¬ νƒ­μ—μ„ λ™μ‹ μ‚¬μ© μ‹ μƒνƒ λ™κΈ°ν™” λ¬Έμ 

**μν–¥**:
- URLκ³Ό ν•„ν„° UIκ°€ μΌμΉν•μ§€ μ•μ
- μ‚¬μ©μ νΌλ€

**λ€μ‘ λ°©μ•**:
1. **URLμ„ Single Source of Truthλ΅ μ‚¬μ©**: ν•­μƒ URL νλΌλ―Έν„°λ¥Ό κΈ°μ¤€μΌλ΅ ν•„ν„° μƒνƒ κ²°μ •
2. **URL νλΌλ―Έν„° κ²€μ¦**: μλ»λ νλΌλ―Έν„°λ” κΈ°λ³Έκ°’μΌλ΅ ν΄λ°±
3. **λΈλΌμ°μ € μ΄λ²¤νΈ μ²λ¦¬**: `popstate` μ΄λ²¤νΈ λ¦¬μ¤λ„λ΅ λ’¤λ΅κ°€κΈ°/μ•μΌλ΅κ°€κΈ° μ²λ¦¬
4. **μƒνƒ λ™κΈ°ν™” ν•¨μ**: URL νλΌλ―Έν„°μ—μ„ ν•„ν„° μƒνƒλ¥Ό κ³„μ‚°ν•λ” λ‹¨μΌ ν•¨μ μ‚¬μ©

**κµ¬ν„ μ°μ„ μμ„**: μ¤‘κ°„

## π“¦ MVP μ‚¬μ© λ£°

### MVP λ²”μ„ (Phase 2.3)

**ν¬ν•¨**:
- β… μ§€μ—­ ν•„ν„° (μ‹/λ„ λ‹¨μ„, "μ „μ²΄" μµμ… ν¬ν•¨)
- β… κ΄€κ΄‘ νƒ€μ… ν•„ν„° (8κ°€μ§€ νƒ€μ…, "μ „μ²΄" μµμ… ν¬ν•¨)
- β… ν•„ν„° μ΅°ν•© (μ§€μ—­ + νƒ€μ… λ™μ‹ μ μ©)
- β… URL νλΌλ―Έν„° μ—°λ™ (κ³µμ  κ°€λ¥ν• λ§ν¬)
- β… κΈ°λ³Έ μ—λ¬ μ²λ¦¬ λ° λ΅λ”© μƒνƒ

**μ μ™Έ (ν–¥ν›„ κµ¬ν„)**:
- β μ‹/κµ°/κµ¬ λ‹¨μ„ ν•„ν„° (Phase 2.3 μ΄ν›„ ν™•μ¥)
- β ν•„ν„° μ΄κΈ°ν™” λ²„νΌ (UX κ°μ„  λ‹¨κ³„)
- β ν•„ν„° νμ¤ν† λ¦¬ (μµκ·Ό μ‚¬μ©ν• ν•„ν„°)
- β ν•„ν„° μ¦κ²¨μ°ΎκΈ° (μμ£Ό μ‚¬μ©ν•λ” ν•„ν„° μ΅°ν•© μ €μ¥)
- β ν•„ν„° κ²°κ³Ό κ°μ ν‘μ‹ (Phase 2.6 νμ΄μ§€λ„¤μ΄μ…κ³Ό ν•¨κ»)

### MVP μ²΄ν¬λ¦¬μ¤νΈ

- [ ] `lib/api/tour-api-client.ts` μƒμ„± λ° `fetchAreaCodes` ν•¨μ κµ¬ν„
- [ ] `components/tour-filters.tsx` μƒμ„± λ° ν•„ν„° UI κµ¬ν„
- [ ] `app/page.tsx` μμ • (URL νλΌλ―Έν„° μ½κΈ°, ν•„ν„° ν†µν•©)
- [ ] ν•„ν„° λ³€κ²½ μ‹ URL μ—…λ°μ΄νΈ λ° λ°μ΄ν„° μ¬λ΅λ“
- [ ] μ—λ¬ μ²λ¦¬ (μ§€μ—­μ½”λ“ API μ‹¤ν¨, λ©λ΅ API μ‹¤ν¨)
- [ ] λ΅λ”© μƒνƒ ν‘μ‹
- [ ] λΉ κ²°κ³Ό μ²λ¦¬
- [ ] λ°μ‘ν• λ””μμΈ κ²€μ¦ (λ¨λ°”μΌ/λ°μ¤ν¬ν†±)
- [ ] λ‹¤ν¬ λ¨λ“ μ§€μ› ν™•μΈ
- [ ] μ ‘κ·Όμ„± κ²€μ¦ (ARIA λΌλ²¨, ν‚¤λ³΄λ“ λ„¤λΉ„κ²μ΄μ…)

## π”§ κΈ°μ  μ¤νƒ

- **shadcn/ui Select**: λ“λ΅­λ‹¤μ΄ ν•„ν„° UI
- **Next.js 15 App Router**: URL νλΌλ―Έν„° κΈ°λ° μƒνƒ κ΄€λ¦¬
- **TypeScript**: νƒ€μ… μ•μ •μ„±
- **Tailwind CSS**: μ¤νƒ€μΌλ§

## π“ μ°Έκ³  μλ£

- PRD: `docs/PRD.md` (2.1 κ΄€κ΄‘μ§€ λ©λ΅ + μ§€μ—­/νƒ€μ… ν•„ν„°)
- λ””μμΈ: `docs/design/DESIGN.md` (ν•„ν„° UI λ μ΄μ•„μ›ƒ)
- API λ¬Έμ„: ν•κµ­κ΄€κ΄‘κ³µμ‚¬ κ³µκ³µ API (`/areaCode2`, `/areaBasedList2`)

## β… μ™„λ£ κΈ°μ¤€

1. μ§€μ—­ ν•„ν„°λ΅ κ΄€κ΄‘μ§€ λ©λ΅ ν•„ν„°λ§ κ°€λ¥
2. κ΄€κ΄‘ νƒ€μ… ν•„ν„°λ΅ κ΄€κ΄‘μ§€ λ©λ΅ ν•„ν„°λ§ κ°€λ¥
3. λ‘ ν•„ν„°λ¥Ό λ™μ‹μ— μ μ© κ°€λ¥
4. URL νλΌλ―Έν„°λ΅ ν•„ν„° μƒνƒ κ³µμ  κ°€λ¥
5. ν•„ν„° λ³€κ²½ μ‹ λ΅λ”© μƒνƒ ν‘μ‹
6. μ—λ¬ λ°μƒ μ‹ λ…ν™•ν• λ©”μ‹μ§€ ν‘μ‹
7. λ°μ‘ν• λ””μμΈ λ° λ‹¤ν¬ λ¨λ“ μ§€μ›
8. λ¨λ“  ν…μ¤νΈ μΌ€μ΄μ¤ ν†µκ³Ό



